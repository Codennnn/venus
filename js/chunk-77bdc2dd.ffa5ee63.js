(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-77bdc2dd"],{"2c72":function(e,t,a){"use strict";var i=a("5530"),s=(a("d3b7"),a("7e79")),n=a("be3b");var r={name:"AvatarUpload",components:{VueCropper:s.VueCropper},props:{preview:{type:Boolean,default:!1}},data:function(){return{avatarInfo:null,avatarBase64:"",uploading:!1,showPreview:!1,previews:{},previewStyle1:null,previewStyle2:null}},methods:{beforeUpload:function(e){var t=this;if(e.size<2097152){var a=new FileReader;a.readAsDataURL(e),a.onload=function(a){var i=a.target.result;t.avatarInfo=e,t.avatarBase64=i,t.preview&&(t.showPreview=!0)}}else this.$message.error("图片大小不能超过 2MB！");return!1},realTime:function(e){this.previews=e;var t={width:"".concat(e.w,"px"),height:"".concat(e.h,"px"),overflow:"hidden",borderRadius:"9999px",boxShadow:"0 0 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"};this.previewStyle1=Object(i.a)(Object(i.a)({},t),{},{zoom:250/e.w}),this.previewStyle2=Object(i.a)(Object(i.a)({},t),{},{zoom:150/e.w})},handleUpload:function(){var e=this;this.uploading=!0,this.$refs.cropper.getCropBlob((function(t){var a;(new FormData).append("avatar",t,e.avatarInfo.avatar),Object(n.a)({url:"/common/image",method:"post",data:a}).then((function(){e.$message.success("头像上传成功")})).finally((function(){e.uploading=!1}))}))}}},l=a("2877"),o=Object(l.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"flex items-end"},[a("vue-cropper",{ref:"cropper",staticStyle:{width:"300px",height:"300px"},attrs:{"output-type":"jpeg",mode:"cover",info:!1,"output-size":.8,"can-move":!1,"can-move-box":!0,"can-scale":!0,"auto-crop":!0,"center-box":!0,fixed:!0,"info-true":!0,img:e.avatarBase64},on:{realTime:e.realTime}}),e.showPreview?a("div",{staticClass:"ml-8 text-center"},[a("div",{style:e.previewStyle1},[a("div",{style:e.previews.div},[a("img",{staticStyle:{"max-width":"initial"},style:e.previews.img,attrs:{alt:"头像预览",src:e.previews.url}})])]),a("p",{staticClass:"mt-4 text-gray-600"},[e._v("250 X 250")])]):e._e(),e.showPreview?a("div",{staticClass:"ml-8 text-center"},[a("div",{style:e.previewStyle2},[a("div",{style:e.previews.div},[a("img",{staticStyle:{"max-width":"initial"},style:e.previews.img,attrs:{alt:"头像预览",src:e.previews.url}})])]),a("p",{staticClass:"mt-4 text-gray-600"},[e._v("150 X 150")])]):e._e()],1),a("div",{staticClass:"mt-6 flex items-center"},[a("a-upload",{staticClass:"avatar-upload",attrs:{accept:"image/*","show-upload-list":!1,"before-upload":e.beforeUpload}},[a("a-button",[e._v("选择图片")])],1),a("a-button",{staticClass:"ml-4",attrs:{type:"primary",disabled:!e.avatarInfo,loading:e.uploading},on:{click:e.handleUpload}},[e._v(" "+e._s(e.uploading?"正在上传":"开始上传")+" ")])],1)])}),[],!1,null,null,null);t.a=o.exports},ef32:function(e,t,a){"use strict";a.r(t);var i=a("2c72"),s=(a("b0c0"),{name:"FilesUpload",data:function(){return{headers:{authorization:"authorization-text"},defaultFileList:[{uid:"1",name:"xxx.png",status:"done",url:"http://www.baidu.com/xxx.png"},{uid:"2",name:"yyy.png",status:"done",url:"http://www.baidu.com/yyy.png"},{uid:"3",name:"zzz.png",status:"error",response:"上传失败",url:"http://www.baidu.com/zzz.png"}]}},methods:{handleChange:function(e){e.file.status,"done"===e.file.status?this.$message.success("成功上传 ".concat(e.file.name)):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传失败"))}}}),n=a("2877"),r=Object(n.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",{staticClass:"mb-4"},[this._v("经典款式，用户点击按钮弹出文件选择框")]),t("a-upload",{attrs:{multiple:"",name:"file",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","default-file-list":this.defaultFileList,headers:this.headers},on:{change:this.handleChange}},[t("a-button",[this._v("上传文件")])],1)],1)}),[],!1,null,null,null).exports,l={name:"ImageUpload",data:function(){return{headers:{authorization:"authorization-text"},defaultFileList:[{uid:"-1",name:"xxx.jpg",status:"done",thumbUrl:"https://gitee.com/chinesee/images/raw/master/img/img_012.jpg"},{uid:"-2",name:"yyy.png",status:"done",thumbUrl:"https://gitee.com/chinesee/images/raw/master/img/img_042.png"}]}},methods:{handleChange:function(e){e.file.status,"done"===e.file.status?this.$message.success("成功上传 ".concat(e.file.name)):"error"===e.file.status&&this.$message.error("".concat(e.file.name," 上传失败"))}}},o=Object(n.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("p",{staticClass:"mb-4"},[this._v("上传文件为图片，可展示本地缩略图")]),t("a-upload",{attrs:{multiple:"",name:"file",action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",accept:"image/*","list-type":"picture","default-file-list":this.defaultFileList,headers:this.headers},on:{change:this.handleChange}},[t("a-button",[this._v("上传图片")])],1)],1)}),[],!1,null,null,null).exports,c=a("1da1");a("96cf"),a("d3b7");function u(e){return new Promise((function(t,a){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return a(e)}}))}var p={name:"PhotoWallUpload",data:function(){return{previewVisible:!1,previewImage:"",fileList:[{uid:"-1",name:"image.png",status:"done",url:"https://gitee.com/chinesee/images/raw/master/img/img_035.png"},{uid:"-2",name:"image.png",status:"done",url:"https://gitee.com/chinesee/images/raw/master/img/img_036.png"},{uid:"-3",name:"image.png",status:"done",url:"https://gitee.com/chinesee/images/raw/master/img/img_037.png"},{uid:"-4",name:"image.png",status:"done",url:"https://gitee.com/chinesee/images/raw/master/img/img_038.png"},{uid:"-5",name:"image.png",status:"done",url:"https://gitee.com/chinesee/images/raw/master/img/img_027.png"}]}},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(c.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e.url||e.preview){a.next=4;break}return a.next=3,u(e.originFileObj);case 3:e.preview=a.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return a.stop()}}),a)})))()},handleChange:function(e){var t=e.fileList;this.fileList=t},handleRemove:function(){var e=this;return new Promise((function(t,a){e.$confirm({content:"确定删除该图片？",okText:"删除",cancelText:"点错了",okButtonProps:{props:{type:"danger"}},onOk:function(){t()},onCancel:function(){a()}})}))}}},d={name:"FileUpload",components:{FilesUpload:r,ImageUpload:o,PhotoWallUpload:Object(n.a)(p,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clearfix"},[a("p",{staticClass:"mb-4"},[e._v("用户可以上传图片并在列表中显示缩略图。当上传照片数到达限制后，上传按钮消失")]),a("a-upload",{attrs:{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76","list-type":"picture-card","file-list":e.fileList,remove:e.handleRemove},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<6?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"mt-2"},[e._v("上传")])],1):e._e()]),a("a-modal",{attrs:{centered:"",width:"95vw",visible:e.previewVisible,closable:!1,footer:null},on:{cancel:e.handleCancel}},[a("img",{attrs:{alt:"image",src:e.previewImage}})])],1)}),[],!1,null,null,null).exports,AvatarUpload:i.a}},m=Object(n.a)(d,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"section-card mb-6"},[t("h3",{staticClass:"section-card__title"},[this._v("文件上传")]),t("div",{staticClass:"flex"},[t("files-upload",{staticClass:"w-1/3 pr-3"}),t("image-upload",{staticClass:"w-1/3 px-3"}),t("photo-wall-upload",{staticClass:"w-1/3 pl-3"})],1)]),t("div",{staticClass:"section-card mb-6"},[t("h3",{staticClass:"section-card__title"},[this._v("头像上传")]),t("avatar-upload",{attrs:{preview:""}})],1)])}),[],!1,null,null,null);t.default=m.exports}}]);