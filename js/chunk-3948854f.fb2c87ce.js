(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3948854f"],{"2c72":function(t,e,a){"use strict";var r=a("5530"),i=(a("d3b7"),a("7e79")),s=a("be3b");var o={name:"AvatarUpload",components:{VueCropper:i.VueCropper},props:{preview:{type:Boolean,default:!1}},data:function(){return{avatarInfo:null,avatarBase64:"",uploading:!1,showPreview:!1,previews:{},previewStyle1:null,previewStyle2:null}},methods:{beforeUpload:function(t){var e=this;if(t.size<2097152){var a=new FileReader;a.readAsDataURL(t),a.onload=function(a){var r=a.target.result;e.avatarInfo=t,e.avatarBase64=r,e.preview&&(e.showPreview=!0)}}else this.$message.error("图片大小不能超过 2MB！");return!1},realTime:function(t){this.previews=t;var e={width:"".concat(t.w,"px"),height:"".concat(t.h,"px"),overflow:"hidden",borderRadius:"9999px",boxShadow:"0 0 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"};this.previewStyle1=Object(r.a)(Object(r.a)({},e),{},{zoom:250/t.w}),this.previewStyle2=Object(r.a)(Object(r.a)({},e),{},{zoom:150/t.w})},handleUpload:function(){var t=this;this.uploading=!0,this.$refs.cropper.getCropBlob((function(e){var a;(new FormData).append("avatar",e,t.avatarInfo.avatar),Object(s.a)({url:"/common/image",method:"post",data:a}).then((function(){t.$message.success("头像上传成功")})).finally((function(){t.uploading=!1}))}))}}},l=a("2877"),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"flex items-end"},[a("vue-cropper",{ref:"cropper",staticStyle:{width:"300px",height:"300px"},attrs:{"output-type":"jpeg",mode:"cover",info:!1,"output-size":.8,"can-move":!1,"can-move-box":!0,"can-scale":!0,"auto-crop":!0,"center-box":!0,fixed:!0,"info-true":!0,img:t.avatarBase64},on:{realTime:t.realTime}}),t.showPreview?a("div",{staticClass:"ml-8 text-center"},[a("div",{style:t.previewStyle1},[a("div",{style:t.previews.div},[a("img",{staticStyle:{"max-width":"initial"},style:t.previews.img,attrs:{alt:"头像预览",src:t.previews.url}})])]),a("p",{staticClass:"mt-4 text-gray-600"},[t._v("250 X 250")])]):t._e(),t.showPreview?a("div",{staticClass:"ml-8 text-center"},[a("div",{style:t.previewStyle2},[a("div",{style:t.previews.div},[a("img",{staticStyle:{"max-width":"initial"},style:t.previews.img,attrs:{alt:"头像预览",src:t.previews.url}})])]),a("p",{staticClass:"mt-4 text-gray-600"},[t._v("150 X 150")])]):t._e()],1),a("div",{staticClass:"mt-6 flex items-center"},[a("a-upload",{staticClass:"avatar-upload",attrs:{accept:"image/*","show-upload-list":!1,"before-upload":t.beforeUpload}},[a("a-button",[t._v("选择图片")])],1),a("a-button",{staticClass:"ml-4",attrs:{type:"primary",disabled:!t.avatarInfo,loading:t.uploading},on:{click:t.handleUpload}},[t._v(" "+t._s(t.uploading?"正在上传":"开始上传")+" ")])],1)])}),[],!1,null,null,null);e.a=c.exports},9576:function(t,e,a){"use strict";a.r(e);var r={name:"Account",components:{AvatarUpload:a("2c72").a},data:function(){return{form:this.$form.createForm(this),formItems:[{label:"账号",placeholder:"请输入账号",decorator:["username",{initialValue:"admin@magic.com"}]},{label:"昵称",placeholder:"请输入昵称",decorator:["nickname",{initialValue:"令狐少侠"}]},{label:"邮箱",placeholder:"请输入邮箱",decorator:["email",{initialValue:"czc12580520@gmail.com"}]},{label:"角色",placeholder:"请输入角色",decorator:["role",{initialValue:"销售经理"}]}],avatarUploadVisible:!1}},computed:{info:function(){return this.$store.state.user.info}}},i=(a("bf72"),a("2877")),s=Object(i.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"flex items-center"},[a("a-avatar",{attrs:{size:80,src:t.info.avatar}}),a("div",{staticClass:"ml-4"},[a("div",{staticClass:"mb-2 text-xl"},[t._v(" "+t._s(t.info.nickname)+" ")]),a("div",[a("a-button",{staticClass:"text-xs",attrs:{type:"primary"},on:{click:function(e){t.avatarUploadVisible=!0}}},[t._v(" 更改头像 ")]),a("a-button",{staticClass:"ml-1 text-xs"},[t._v(" 重置 ")])],1)])],1),a("div",{staticClass:"my-8"},[a("a-form",{staticClass:"account-form",attrs:{"hide-required-mark":"",form:t.form}},t._l(t.formItems,(function(t){var e=t.label,r=t.decorator,i=t.size;void 0===i&&(i="large");var s=t.placeholder;return a("a-form-item",{key:r[0],staticClass:"account-form__item",attrs:{label:e}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:r,expression:"decorator"}],staticClass:"login-input",attrs:{size:i,placeholder:s}})],1)})),1)],1),a("div",[a("table",{staticClass:"permission-table"},[t._m(0),a("tbody",[a("tr",[a("td",[t._v("用户 [Users]")]),a("td",[a("a-checkbox",{attrs:{checked:""}})],1),a("td",[a("a-checkbox")],1),a("td",[a("a-checkbox")],1),a("td",[a("a-checkbox",{attrs:{checked:""}})],1)]),a("tr",[a("td",[t._v("文章 [Articles]")]),a("td",[a("a-checkbox")],1),a("td",[a("a-checkbox",{attrs:{checked:""}})],1),a("td",[a("a-checkbox")],1),a("td",[a("a-checkbox")],1)]),a("tr",[a("td",[t._v("看板 [Board]")]),a("td",[a("a-checkbox")],1),a("td",[a("a-checkbox")],1),a("td",[a("a-checkbox",{attrs:{checked:""}})],1),a("td",[a("a-checkbox")],1)])])])]),a("div",{staticClass:"mt-6 flex justify-end"},[a("a-button",{staticClass:"mr-4",attrs:{size:"large",type:"primary"}},[t._v(" 保存更改 ")]),a("a-button",{attrs:{size:"large"}},[t._v(" 取消 ")])],1),a("a-modal",{attrs:{centered:"",title:"更改头像","mask-closable":!1,footer:null},model:{value:t.avatarUploadVisible,callback:function(e){t.avatarUploadVisible=e},expression:"avatarUploadVisible"}},[a("avatar-upload")],1)],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("功能模块权限")]),e("th",[this._v("Read")]),e("th",[this._v("Write")]),e("th",[this._v("Create")]),e("th",[this._v("Delete")])])])}],!1,null,"eabc0890",null);e.default=s.exports},bf72:function(t,e,a){"use strict";a("d83f")},d83f:function(t,e,a){}}]);